---
import Layout from "../layouts/Layout.astro";

import Title from "../components/Title.astro";
import AnalysisButton from "../components/AnalysisButton.astro";
import LogInButton from "../components/LogInButton.astro";
import Footer from "../components/Footer.astro";

import { getSession } from "auth-astro/server";

const session = await getSession(Astro.request);
console.log("Sesi√≥n:", session);
---

<Layout title="SpotiEmotions">
  <section class="flex flex-col justify-between items-center h-screen py-10">
    <!-- Title -->
    <Title text="Spoti">
      <Fragment slot="after_title">Emotions</Fragment>
    </Title>

    <!-- Analysis button or login button -->
    {
      !session
      ? (<LogInButton />)
      : (<AnalysisButton user={session.user} />)
    }

    <!-- Footer -->
    <Footer />
  </section>
</Layout>